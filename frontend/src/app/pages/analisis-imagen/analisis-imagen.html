<div class="app-container">
  <!-- Sidebar -->
  <aside class="sidebar">
    <div class="logo">
      <img src="assets/logo.png" alt="Logo">
      <h2>Nutrichef IA</h2>
    </div>

    <nav class="menu">
      <button class="menu-btn">ðŸ“– Generador de Recetas</button>
      <button class="menu-btn active">ðŸ“¸ CalorÃ­as en una foto</button>
      <div class="historial">
        <button class="historial-btn">Historial 1</button>
        <button class="historial-btn">Historial 2</button>
        <button class="historial-btn">Historial 3</button>
      </div>
    </nav>

    <div class="user-info">
      <img src="assets/user.png" alt="Usuario" class="avatar">
      <div>
        <p class="username">Username</p>
        <p class="user-handle">@username</p>
      </div>
    </div>
  </aside>

  <!-- Main content -->
  <main class="main-content">
    <!-- Header -->
    <header class="header">
      <button class="progress-btn">â™¡ Mi Progreso</button>
    </header>

    <!-- AnÃ¡lisis de imagen -->
    <div class="analisis-imagen-container">
      <!-- Subir imagen -->
      <div class="upload-section" *ngIf="!imageUrl && !analysisResult">
        <h2>Sube una imagen de tu comida</h2>
        <label class="upload-btn">
          Cargar imagen
          <input type="file" (change)="onFileSelected($event)" accept="image/*">
        </label>
        <p class="hint">o Arrastra tu imagen</p>
      </div>

      <!-- Vista previa -->
      <div *ngIf="imageUrl && !analysisResult" class="image-preview">
        <img [src]="imageUrl" alt="Imagen de comida">
        <button class="analyze-btn" (click)="uploadImage()">Analizar Imagen</button>
      </div>

      <!-- Resultados -->
      <div *ngIf="analysisResult" class="analysis-results">
        <div class="results-header">
          <img [src]="imageUrl" alt="Imagen de comida" class="result-img">
        </div>
        <h3>He analizado la imagen y detecto estos alimentos en tu plato:</h3>
        <ul>
          <li *ngFor="let food of analysisResult.foods_detected">
            {{ food.name | titlecase }} ({{ food.estimated_weight_grams }}g) â†’ {{ food.total_nutrition?.calories }} kcal
          </li>
        </ul>
        <p class="total">
          Total aproximado del plato:
          <strong>{{ analysisResult.meal_analysis?.total_calories }} kcal</strong>
        </p>
        <div *ngIf="analysisResult.meal_analysis?.recommendations?.length > 0" class="recommendations">
          <h4>Recomendaciones:</h4>
          <ul>
            <li *ngFor="let recommendation of analysisResult.meal_analysis?.recommendations">
              {{ recommendation }}
            </li>
          </ul>
        </div>
      </div>

      <!-- JSON -->
      <div *ngIf="analysisResult" class="analysis-json">
        <h2>Resultados del AnÃ¡lisis (JSON)</h2>
        <pre>{{ analysisResult | json }}</pre>
      </div>

      <!-- Error -->
      <div *ngIf="errorMessage" class="error-message">
        <p>Error: {{ errorMessage }}</p>
      </div>
    </div>
  </main>
</div>
